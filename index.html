<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Pomodoro Timer</title>

<style>
:root {
  --bg-main: radial-gradient(circle at top, #f7f9ff, #eef1f7);
  --bg-accent-focus: rgba(40, 200, 120, 0.35);
  --bg-accent-break: rgba(255, 80, 80, 0.35);

  --glass-bg: rgba(255, 255, 255, 0.35);
  --glass-bg-strong: rgba(255, 255, 255, 0.6);
  --glass-border: rgba(255, 255, 255, 0.45);
  --shadow-soft: 0 40px 80px rgba(0, 0, 0, 0.18);

  --text-primary: #1f2937;
  --text-secondary: #6b7280;

  --focus-color: #22c55e;
  --break-color: #ef4444;

  --progress-bg: rgba(0, 0, 0, 0.08);
  --transition: 0.45s cubic-bezier(.4,0,.2,1);
}

body.dark {
  --bg-main: radial-gradient(circle at top, #0d1220, #070a14);
  --glass-bg: rgba(20, 25, 45, 0.35);
  --glass-bg-strong: rgba(20, 25, 45, 0.55);
  --glass-border: rgba(255, 255, 255, 0.18);
  --shadow-soft: 0 60px 120px rgba(0, 0, 0, 0.8);
  --text-primary: #e5e7eb;
  --text-secondary: #9ca3af;
  --progress-bg: rgba(255, 255, 255, 0.12);
}

* { box-sizing: border-box; }
html, body { height: 100%; }

body {
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, "Inter", "Segoe UI", sans-serif;
  background: var(--bg-main);
  color: var(--text-primary);
  overflow: hidden;
  transition: background var(--transition), color var(--transition);
}

/* Background blobs */
.background {
  position: fixed;
  inset: 0;
  z-index: -1;
  overflow: hidden;
}
.blob {
  position: absolute;
  width: 70vmax;
  height: 70vmax;
  filter: blur(120px);
  opacity: 0.8;
  animation: float 60s ease-in-out infinite;
}
.blob.focus {
  background: var(--bg-accent-focus);
  top: -30%;
  left: -25%;
}
.blob.break {
  background: var(--bg-accent-break);
  bottom: -35%;
  right: -25%;
  animation-duration: 80s;
}
@keyframes float {
  0%,100% { transform: translate(0,0); }
  50% { transform: translate(15%, -15%); }
}

/* App */
.app {
  height: 100%;
  display: flex;
  align-items: center;
  justify-content: center;
  padding: 24px;
}
.glass {
  width: 100%;
  max-width: 420px;
  background: var(--glass-bg);
  backdrop-filter: blur(28px) saturate(180%);
  border: 1px solid var(--glass-border);
  border-radius: 30px;
  box-shadow: var(--shadow-soft);
  padding: 26px;
  position: relative;
}

/* Theme toggle */
.theme-toggle {
  position: absolute;
  top: -18px;
  right: -18px;
  width: 48px;
  height: 48px;
  background: var(--glass-bg-strong);
  backdrop-filter: blur(20px);
  border-radius: 50%;
  box-shadow: var(--shadow-soft);
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  font-size: 18px;
}
.theme-toggle span {
  transition: transform var(--transition);
}
body.dark .theme-toggle span {
  transform: rotate(180deg);
}

/* Mode selector */
.mode-toggle {
  display: flex;
  width: 100%;
  background: var(--glass-bg-strong);
  backdrop-filter: blur(20px);
  border-radius: 20px;
  padding: 6px;
  margin-bottom: 28px;
  gap: 6px;
}

.mode-btn {
  flex: 1;
  padding: 14px 0;
  border-radius: 16px;
  border: none;
  font-size: 0.85rem;
  font-weight: 700;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  cursor: pointer;
  background: transparent;
  color: var(--text-secondary);
  transition: background var(--transition), color var(--transition), transform 0.15s ease;
}

.mode-btn.active.focus {
  background: var(--focus-color);
  color: white;
}
.mode-btn.active.break {
  background: var(--break-color);
  color: white;
}

/* Timer */
.timer-wrapper {
  display: flex;
  justify-content: center;
  margin-bottom: 28px;
}
.progress-ring {
  position: relative;
  width: 220px;
  height: 220px;
}
.progress-ring svg {
  transform: rotate(-90deg);
}
.progress-ring circle {
  fill: none;
  stroke-width: 11;
}
.progress-bg {
  stroke: var(--progress-bg);
}
.progress-value {
  stroke-linecap: round;
  filter: drop-shadow(0 0 14px currentColor);
}
.running .progress-ring {
  animation: pulse 1.2s ease-in-out infinite;
}
.running.urgent .progress-ring {
  animation-duration: 0.6s;
}
@keyframes pulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.12); }
  100% { transform: scale(1); }
}
.time {
  position: absolute;
  inset: 0;
  display: flex;
  align-items: center;
  justify-content: center;
  font-size: 3rem;
  font-weight: 600;
  letter-spacing: 0.08em;
}

/* Controls ‚Äì single toggle button */
.controls {
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 12px;
  margin-bottom: 22px;
}
button.primary { 
  padding: 14px 40px;
  font-size: 1rem;
  font-weight: 600;
  border-radius: 18px;
  border: none;
  cursor: pointer;
  color: white;
  background: var(--focus-color);
  transition: transform 0.15s ease, background var(--transition);
}
button.secondary {
  padding: 12px 36px;
  font-size: 0.95rem;
  font-weight: 600;
  border-radius: 18px;
  border: none;
  cursor: pointer;
  background: #ddd;
  color: #111;
  transition: transform 0.15s ease, background var(--transition), color var(--transition);
}
body.dark button.secondary {
  background: #444;
  color: #fff;
}
button:active { transform: scale(0.96); }

/* Settings */
.settings {
  display: flex;
  gap: 14px;
}
.setting label {
  font-size: 0.72rem;
  color: var(--text-secondary);
  margin-bottom: 6px;
  display: block;
}
.setting input {
  width: 100%;
  padding: 11px;
  border-radius: 14px;
  border: 1px solid var(--glass-border);
  background: var(--glass-bg);
  color: var(--text-primary);
}
.setting input:disabled { opacity: 0.45; }
</style>
</head>

<body>
<div class="background">
  <div class="blob focus"></div>
  <div class="blob break"></div>
</div>

<div class="app">
  <div class="glass" id="app">
    <div class="theme-toggle" id="themeToggle"><span>‚òÄÔ∏è</span></div>

    <div class="mode-toggle">
      <button class="mode-btn focus active" id="focusBtn">Focus</button>
      <button class="mode-btn break" id="breakBtn">Break</button>
    </div>

    <div class="timer-wrapper">
      <div class="progress-ring">
        <svg width="220" height="220">
          <circle class="progress-bg" cx="110" cy="110" r="100"/>
          <circle class="progress-value" cx="110" cy="110" r="100"/>
        </svg>
        <div class="time" id="timeDisplay">25:00</div>
      </div>
    </div>

    <div class="controls">
      <button class="primary" id="startPauseBtn">Start</button>
      <button class="secondary" id="resetBtn">Reset</button>
    </div>

    <div class="settings">
      <div class="setting">
        <label>Focus (min)</label>
        <input type="number" id="focusInput" min="1" value="25">
      </div>
      <div class="setting">
        <label>Break (min)</label>
        <input type="number" id="breakInput" min="1" value="5">
      </div>
    </div>
  </div>
</div>

<script>
const app = document.getElementById("app");
const timeDisplay = document.getElementById("timeDisplay");
const startPauseBtn = document.getElementById("startPauseBtn");
const resetBtn = document.getElementById("resetBtn");
const focusInput = document.getElementById("focusInput");
const breakInput = document.getElementById("breakInput");
const themeToggle = document.getElementById("themeToggle");
const focusBtn = document.getElementById("focusBtn");
const breakBtn = document.getElementById("breakBtn");
const progressCircle = document.querySelector(".progress-value");

const radius = 100;
const circumference = 2 * Math.PI * radius;
progressCircle.style.strokeDasharray = circumference;

let mode = "focus";
let totalSeconds = focusInput.value * 60;
let remainingSeconds = totalSeconds;
let timer = null;
let running = false;

function formatTime(sec) {
  const m = String(Math.floor(sec / 60)).padStart(2,"0");
  const s = String(sec % 60).padStart(2,"0");
  return `${m}:${s}`;
}

function applyModeStyles() {
  const color = mode === "focus" ? "var(--focus-color)" : "var(--break-color)";
  progressCircle.style.stroke = color;
  startPauseBtn.style.background = color;
  focusBtn.classList.toggle("active", mode === "focus");
  breakBtn.classList.toggle("active", mode === "break");
}

function updateProgress() {
  progressCircle.style.strokeDashoffset =
    circumference * (1 - remainingSeconds / totalSeconds);
}

function updateUI() {
  timeDisplay.textContent = formatTime(remainingSeconds);
  applyModeStyles();
  updateProgress();
}

function startTimer() {
  if (running) return;
  running = true;
  app.classList.add("running");
  focusInput.disabled = true;
  breakInput.disabled = true;
  startPauseBtn.textContent = "Pause";

  timer = setInterval(() => {
    remainingSeconds--;
    if (remainingSeconds <= 60) app.classList.add("urgent");
    if (remainingSeconds <= 0) { switchMode(); return; }
    updateUI();
  }, 1000);
}

function pauseTimer() {
  running = false;
  clearInterval(timer);
  timer = null;
  app.classList.remove("running","urgent");
  startPauseBtn.textContent = "Start";
}

function resetTimer() {
  pauseTimer();
  mode = "focus";
  totalSeconds = focusInput.value * 60;
  remainingSeconds = totalSeconds;
  focusInput.disabled = false;
  breakInput.disabled = false;
  updateUI();
}

function switchMode() {
  pauseTimer();
  app.classList.remove("urgent");
  mode = mode === "focus" ? "break" : "focus";
  totalSeconds = (mode === "focus" ? focusInput.value : breakInput.value) * 60;
  remainingSeconds = totalSeconds;
  updateUI();
  startTimer();
}

focusBtn.onclick = () => {
  if (running) return;
  mode = "focus";
  totalSeconds = focusInput.value * 60;
  remainingSeconds = totalSeconds;
  updateUI();
};

breakBtn.onclick = () => {
  if (running) return;
  mode = "break";
  totalSeconds = breakInput.value * 60;
  remainingSeconds = totalSeconds;
  updateUI();
};

startPauseBtn.onclick = () => {
  running ? pauseTimer() : startTimer();
};
resetBtn.onclick = resetTimer;

themeToggle.onclick = () => {
  document.body.classList.toggle("dark");
  themeToggle.innerHTML = document.body.classList.contains("dark")
    ? "<span>üåô</span>"
    : "<span>‚òÄÔ∏è</span>";
};

updateUI();
</script>
</body>
</html>
